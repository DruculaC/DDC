C51 COMPILER V9.01   VOICE                                                                 07/30/2013 10:01:33 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE VOICE
OBJECT MODULE PLACED IN .\out\voice.obj
COMPILER INVOKED BY: D:\Program Files (x86)\keil\C51\BIN\C51.EXE voice.c LARGE BROWSE DEBUG OBJECTEXTEND PRINT(.\listing
                    -\voice.lst) OBJECT(.\out\voice.obj)

line level    source

   1          #include "N79E81x.h"
   2          #include"voice.h"
   3          
   4          
   5          
   6          //延时 X 毫秒
   7          void delay_ms(unsigned int count)
   8          {
   9   1              unsigned int i,j;
  10   1              for(i=0;i<count;i++)
  11   1              {
  12   2                      for(j=0;j<500;j++);
  13   2              }
  14   1      }
  15          
  16          
  17          
  18          
  19          //延时 X 微秒
  20          void delay_us(unsigned int count)
  21          {
  22   1              unsigned int i,j;
  23   1              for(i=0;i<count;i++)
  24   1              {
  25   2                      for(j=0;j<2;j++);
  26   2              }
  27   1      }
  28          
  29          
  30          
  31          
  32          //控制地址段放音
  33          void SC_Speech(unsigned char cnt)
  34          {
  35   1              unsigned char i;
  36   1      //      SC_RST=1;
  37   1      //      delay_ms(15); //DAC, 大于 32 段为 15MS
  38   1              SC_RST=0;
  39   1              delay_ms(40);
  40   1              SC_RST=1;
  41   1              delay_ms(40);
  42   1              for(i=0;i < cnt;i++)
  43   1              {
  44   2                      SC_DATA=1; // 数据脉冲高
  45   2                      delay_us(350); // 延时 100US
  46   2                      SC_DATA=0; // 数据脉冲低
  47   2                      delay_us(350); // 延时 100US
  48   2              }
  49   1      }
  50          
  51          void noVoice()
  52          {
  53   1              P14=0;
  54   1              SC_DATA=0;
C51 COMPILER V9.01   VOICE                                                                 07/30/2013 10:01:33 PAGE 2   

  55   1              SC_RST=0;
  56   1              delay_us(1000); // 上电复位防止干扰发声
  57   1              SC_RST=1;
  58   1              delay_us(1000);
  59   1              P14=1;
  60   1      }
  61          
  62          
  63          ///************* 主程序 ****************/
  64          //void main (void)
  65          //{
  66          //
  67          //      P14=0;
  68          //      SC_DATA=0;
  69          //      SC_RST=1;
  70          //      delay_us(1000); // 上电复位防止干扰发声
  71          //      SC_RST=0;
  72          //      delay_us(1000);
  73          //      while(1)
  74          //      {
  75          //
  76          //
  77          //
  78          //              P14=1;
  79          //              SC_Speech(2); // 发 8 个触发信号 , 发第 8 段声音
  80          //
  81          //              
  82          //              delay_ms(5000); // 延时放音时间 5 秒
  83          //              P14=0;
  84          //
  85          //      }
  86          //}


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    134    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       1
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
